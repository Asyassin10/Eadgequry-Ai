# Dockerfile for running Maven tests and SonarQube scanner
FROM maven:3.9.6-eclipse-temurin-21

# Install required tools
RUN apt-get update && apt-get install -y \
    curl \
    git \
    && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /workspace

# Copy Maven settings if needed
# COPY settings.xml /root/.m2/settings.xml

# Default command - run tests and generate coverage
CMD ["mvn", "clean", "test", "jacoco:report"]
